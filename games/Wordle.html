<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Jer's Custom Wordle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      background: #121213;
      color: #eee;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
      min-height: 100vh;
      margin: 0;
    }
    h1 {
      margin-bottom: 0.5rem;
      font-weight: 700;
      user-select: none;
    }
    #message {
      margin: 10px 0;
      min-height: 1.5em;
      font-weight: 600;
      color: #ffcc00;
    }
    #board {
      display: grid;
      grid-template-rows: repeat(6, 1fr);
      gap: 5px;
      user-select: none;
    }
    .row {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 5px;
    }
    .tile {
      width: 50px;
      height: 50px;
      border: 2px solid #3a3a3c;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2rem;
      font-weight: 700;
      text-transform: uppercase;
      background-color: #121213;
      transition: background-color 0.3s ease, border-color 0.3s ease;
      user-select: none;
    }
    .tile.correct {
      background-color: #538d4e; /* green */
      border-color: #538d4e;
      color: white;
    }
    .tile.present {
      background-color: #b59f3b; /* yellow */
      border-color: #b59f3b;
      color: white;
    }
    .tile.absent {
      background-color: #3a3a3c; /* gray */
      border-color: #3a3a3c;
      color: white;
    }
    #keyboard {
      margin-top: 20px;
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 5px;
      max-width: 550px;
      user-select: none;
    }
    .key {
      background-color: #818384;
      border: none;
      border-radius: 4px;
      height: 50px;
      font-weight: 700;
      color: white;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    .key.correct {
      background-color: #538d4e;
    }
    .key.present {
      background-color: #b59f3b;
    }
    .key.absent {
      background-color: #3a3a3c;
    }
    .key.wide {
      grid-column: span 1.5;
    }
    #reset-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background: #538d4e;
      border: none;
      border-radius: 5px;
      font-weight: 700;
      cursor: pointer;
      color: white;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    #reset-btn:hover {
      background: #406633;
    }
  </style>
</head>
<body>
  <h1>Jer's Custom Wordle</h1>
  <div id="message"></div>
  <div id="board"></div>
  <div id="keyboard"></div>
  <button id="reset-btn">Restart Game</button>

  <script>
    // --------- Customize your vocabulary here ---------
    const vocab = [
      "HARD", "YOUTUBER", "JROUND", "AYSOAYSAILING", "ICECREAMCAKE",
      "FROGS", "GHOST", "HOUSE", "JUMPS", "KNIFE",
      "LIGHT", "MOUSE", "NURSE", "PLANT", "QUEST",
      "RIVER", "SHARE", "TIGER", "UNITY", "VIRUS",
      "WORLD", "YEARN", "ZEBRA"
    ];
    // -------------------------------------------------

    const WORD_LENGTH = 5;
    const MAX_GUESSES = 6;

    let answer = "";
    let currentGuess = "";
    let currentRow = 0;
    let gameOver = false;

    const board = document.getElementById("board");
    const message = document.getElementById("message");
    const keyboard = document.getElementById("keyboard");
    const resetBtn = document.getElementById("reset-btn");

    // Initialize board
    function createBoard() {
      board.innerHTML = "";
      for(let i=0; i<MAX_GUESSES; i++) {
        const row = document.createElement("div");
        row.classList.add("row");
        for(let j=0; j<WORD_LENGTH; j++) {
          const tile = document.createElement("div");
          tile.classList.add("tile");
          row.appendChild(tile);
        }
        board.appendChild(row);
      }
    }

    // Create keyboard
    const keysLayout = [
      "Q","W","E","R","T","Y","U","I","O","P",
      "A","S","D","F","G","H","J","K","L",
      "Z","X","C","V","B","N","M"
    ];
    function createKeyboard() {
      keyboard.innerHTML = "";
      keysLayout.forEach(key => {
        const btn = document.createElement("button");
        btn.textContent = key;
        btn.classList.add("key");
        btn.id = "key-" + key;
        btn.addEventListener("click", () => {
          if(gameOver) return;
          handleKey(key);
        });
        keyboard.appendChild(btn);
      });
    }

    function showMessage(text, duration=2000) {
      message.textContent = text;
      if(duration > 0) {
        setTimeout(() => {
          message.textContent = "";
        }, duration);
      }
    }

    // Pick a random word from vocab
    function pickAnswer() {
      const randomIndex = Math.floor(Math.random() * vocab.length);
      return vocab[randomIndex];
    }

    // Update the tiles on board for current row and guess
    function updateBoard() {
      const row = board.children[currentRow];
      for(let i=0; i<WORD_LENGTH; i++) {
        const tile = row.children[i];
        tile.textContent = currentGuess[i] ? currentGuess[i] : "";
      }
    }

    // Check guess validity
    function isValidWord(word) {
      return vocab.includes(word);
    }

    // Color the tiles for the guess and update keyboard colors
    function colorGuess() {
      const row = board.children[currentRow];
      const guessArr = currentGuess.split("");
      const answerArr = answer.split("");

      // For marking letters used for yellow
      const letterCount = {};

      // Count letter frequency in answer
      answerArr.forEach(letter => {
        letterCount[letter] = (letterCount[letter] || 0) + 1;
      });

      // First pass: mark green (correct)
      for(let i=0; i<WORD_LENGTH; i++) {
        const tile = row.children[i];
        if(guessArr[i] === answerArr[i]) {
          tile.classList.add("correct");
          letterCount[guessArr[i]]--;
          updateKeyColor(guessArr[i], "correct");
        }
      }

      // Second pass: mark yellow or gray
      for(let i=0; i<WORD_LENGTH; i++) {
        const tile = row.children[i];
        if(tile.classList.contains("correct")) continue;

        if(answerArr.includes(guessArr[i]) && letterCount[guessArr[i]] > 0) {
          tile.classList.add("present");
          letterCount[guessArr[i]]--;
          updateKeyColor(guessArr[i], "present");
        } else {
          tile.classList.add("absent");
          updateKeyColor(guessArr[i], "absent");
        }
      }
    }

    // Update keyboard key colors - only upgrade colors (green > yellow > gray)
    function updateKeyColor(letter, color) {
      const keyBtn = document.getElementById("key-" + letter);
      if(!keyBtn) return;
      const colors = ["absent", "present", "correct"];
      const currentColor = colors.findIndex(c => keyBtn.classList.contains(c));
      const newColor = colors.indexOf(color);
      if(newColor > currentColor) {
        keyBtn.classList.remove(...colors);
        keyBtn.classList.add(color);
      }
    }

    // Handle key input
    function handleKey(key) {
      if(gameOver) return;

      if(key === "ENTER") {
        if(currentGuess.length !== WORD_LENGTH) {
          showMessage("Not enough letters");
          return;
        }
        if(!isValidWord(currentGuess)) {
          showMessage("Word not in vocabulary");
          return;
        }
        submitGuess();
      } else if(key === "BACKSPACE") {
        currentGuess = currentGuess.slice(0, -1);
        updateBoard();
      } else if(/^[A-Z]$/.test(key)) {
        if(currentGuess.length < WORD_LENGTH) {
          currentGuess += key;
          updateBoard();
        }
      }
    }

    function submitGuess() {
      colorGuess();

      if(currentGuess === answer) {
        showMessage("ðŸŽ‰ You Win!", 5000);
        gameOver = true;
        return;
      }

      currentRow++;
      currentGuess = "";

      if(currentRow === MAX_GUESSES) {
        showMessage(`ðŸ˜ž You Lose! The word was ${answer}`, 5000);
        gameOver = true;
      }
    }

    // Listen to keyboard events
    window.addEventListener("keydown", e => {
      if(gameOver) return;

      if(e.key === "Enter") {
        handleKey("ENTER");
      } else if(e.key === "Backspace") {
        handleKey("BACKSPACE");
      } else {
        const key = e.key.toUpperCase();
        if(/^[A-Z]$/.test(key)) {
          handleKey(key);
        }
      }
    });

    // Add special keys to keyboard for ENTER and BACKSPACE
    function addSpecialKeys() {
      const enterBtn = document.createElement("button");
      enterBtn.textContent = "ENTER";
      enterBtn.classList.add("key", "wide");
      enterBtn.addEventListener("click", () => {
        handleKey("ENTER");
      });
      keyboard.appendChild(enterBtn);

      const backspaceBtn = document.createElement("button");
      backspaceBtn.textContent = "âŒ«";
      backspaceBtn.classList.add("key", "wide");
      backspaceBtn.addEventListener("click", () => {
        handleKey("BACKSPACE");
      });
      keyboard.appendChild(backspaceBtn);
    }

    // Reset game
    function resetGame() {
      answer = pickAnswer();
      currentGuess = "";
      currentRow = 0;
      gameOver = false;
      message.textContent = "";
      createBoard();
      createKeyboard();
      addSpecialKeys();
    }

    resetBtn.addEventListener("click", resetGame);

    // Start first game
    resetGame();
  </script>
</body>
</html>
